---
title: "[언리얼5/UE5] 다양한 총 사용하기 - 2 (피격 대상 판별)"
date: 2024-09-17
toc: true
categories:
  - "Tistory"
tags:
  - "tistory"
---

총이 피격하는 곳을 알기 위해서

DrawDebugCamera를 사용해보자

GetActorLocation(), GetAcotorRotation()을 사용한다면 당연히 내가 원하는 곳을 보는 카메라를 얻을 수 없을 것이다.

![](https://blog.kakaocdn.net/dna/F3KGB/btsJDOV2jdu/AAAAAAAAAAAAAAAAAAAAAE9OSGUnQrpcZV757PwO7pU95h03g_8QW8zZTrsVFftn/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=FC2xTKdcMqLUTZsmfcpRSYfUsHQ%3D)

![](https://blog.kakaocdn.net/dna/cciCj8/btsJDrNHLpa/AAAAAAAAAAAAAAAAAAAAABNdQNAUF7-hOX12R1JyyqQ1uojtsG9y0bi1qWpLwvy_/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=0KCH3IZVUCus6jeJSLwK%2FT4r5Eo%3D)

![](https://blog.kakaocdn.net/dna/bi9tFP/btsJFredBYU/AAAAAAAAAAAAAAAAAAAAAMmx4MvNWyiWD4-ywXNY0xMkGxbMOBIbdT9nHwKQ_QWZ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=M0mb2jKsrZarOO79ppk4Je88988%3D)

![](https://blog.kakaocdn.net/dna/lU5W1/btsJDnxSsp7/AAAAAAAAAAAAAAAAAAAAAMbGqwUiDk3jb_rp9SPHgApDOiTojLl1bPQRRGKmrCOK/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=OyvZIeJQgO%2FgBvvkkzuTPJWuxrY%3D)

![](https://blog.kakaocdn.net/dna/v7QKv/btsJDxtufp3/AAAAAAAAAAAAAAAAAAAAAKd7i8S9Xs0YaEM-0YGdMyHSLiSNHkHUfdNNgeffFDfN/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=4YUWnTSArVTQV66oOuDjb85OSIY%3D)

한 번 클릭미스가 나서 2개가 그려진겁니다  :(

총알 충돌처리가 되야 피격처리가 원활하기 때문에

Collision을 추가합니다. ( Edit -> Project Setting -> Collision 에서 Trace Channel에 buller 추가)

![](https://blog.kakaocdn.net/dna/otB5Q/btsJFawRjy1/AAAAAAAAAAAAAAAAAAAAANKadZlvAns_FncFFOdSwdX0kpFMoKBPBkYC8PUCNIv6/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=GT3GesW9iXmnP8%2BrhjcWRKnomeY%3D)

Bullet의 Default Response를 Block으로 했으니

수정할게 조금있다.

No Collision은 Ignore로   
OverlapAll 에서도 Overlap으로

![](https://blog.kakaocdn.net/dna/bFgwij/btsJFajjSEx/AAAAAAAAAAAAAAAAAAAAACQ28w_py1ddonOdEciCrFpakCPSEhxyAlb3_EM7ZEeN/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=D1mW7j1B9Q02xRSWsZpfJAKWl3s%3D)

![](https://blog.kakaocdn.net/dna/mPFXQ/btsJDbdwqFc/AAAAAAAAAAAAAAAAAAAAAE3GQ6AmGrDcDgtacUtv0T1TrKfom_KL3FRCRs1Rgl-Z/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=ddWd9ZCgJQirQBYK1UNNILQsh%2FM%3D)

이제 점을 찍어 봤다.

pPos = location ( 카메라 위치 ) + 바라보는 방향 \*  Range

그림과 같이 점이 찍힘, 방향도 정확하다 좋다!

![](https://blog.kakaocdn.net/dna/bf8cEz/btsJE8siFKN/AAAAAAAAAAAAAAAAAAAAADW1bYORkBA8Av8vtFrv7DAZV9B3NjTrkZu3ahhHtVCU/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=QBQdMgxXAJmPwwRH42c8xKDZkMA%3D)

이제 아까 만든 Bullet 충돌 판정을 만들어서 피격까지 가보자

아까 우리가 직접 만든 Bullet 판정은 어떻게 하냐

복잡해보이지만 간단하다 천천히 따라해보자

한줄 정리

내 프로젝트 파일 위치로 간다 -> Config 파일 -> DefaultEngine.ini 파일 -> control + F (찾기) Bullet (아까 만든 trace이름)

![](https://blog.kakaocdn.net/dna/bfofxO/btsJDQT7z7A/AAAAAAAAAAAAAAAAAAAAACa1neDbCsVRk7LCqVaqXX1bXx-xe2TziVFdjdrPqfv9/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=in56WSYhHJrfYzEG31eih1723ms%3D)
![](https://blog.kakaocdn.net/dna/xRVKf/btsJEUVvwDB/AAAAAAAAAAAAAAAAAAAAACrbxONYpEIcYvShCAQPHA8jaysGm8usRez-x348shYg/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=3Fx13tziOvS9DtJMbRyZrFq9Em8%3D)
![](https://blog.kakaocdn.net/dna/bzmkfZ/btsJESwBnkb/AAAAAAAAAAAAAAAAAAAAANMBK_OHt4tP5Ep3BY7CERPtewuxO9gBZ9HLOeYL38sZ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=EU1K1aDR3gRJMGFvVE4AavCfMMc%3D)
![](https://blog.kakaocdn.net/dna/n0p2r/btsJDq2HYlZ/AAAAAAAAAAAAAAAAAAAAABxFLA3I6lnI2R1J7D8WhMwpdlzWADgjbyzS4ujaIijW/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=ivw%2FX3HFpW0uwCQKN2BemSgx7Ug%3D)

그럼 이것을 찾을 수 있따

ECC\_GameTraceChannel1임을 확인할 수 있다.

이것을 사용하면 된다.

![](https://blog.kakaocdn.net/dna/qKMqn/btsJFqfj5gn/AAAAAAAAAAAAAAAAAAAAAMWY4N2wCyI6rLjd-2JfJgNCV6Cbg5sJnKqb8TsL59Nb/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=EG7XB%2BLMPA8aJpqzyMWniRt8CX0%3D)

이것을

LineTraceSingelByChannel 함수를 이용해서 충돌판정을 내자

![](https://blog.kakaocdn.net/dna/DXYLi/btsJDSxjXZM/AAAAAAAAAAAAAAAAAAAAACms7HJW6kMDIjWIDbzh1Rt_hqq3Fdkn_0TIhCFfkHQo/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=By%2FvNjng5SAMeSUx0f6zoO71tX4%3D)

이제 충돌이 된다.

근데 뭔가 이상하다.

아래서 헤맸던 부분을 정리해뒀다. 그것들을 해결하니 정상적으로 잘 된다.

![](https://blog.kakaocdn.net/dna/b5kHs6/btsJDvvXblk/AAAAAAAAAAAAAAAAAAAAAM1fgvVuET8MmeR19DxyGLcZS5m7VFP05hb7AehjQU4h/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=bPfR6lL4kHWrEPgKCtx1mIum0Jg%3D)

## **헤맸던 부분**

hit.TranceEnd라고 했다가 부딪힌 부분에 사각형이 안나타나서 고생했다. ( hit.TranceEnd X , hit.Location O)

![](https://blog.kakaocdn.net/dna/wYy93/btsJDUPsT77/AAAAAAAAAAAAAAAAAAAAAKUZPiMTqBdeepzv9oXvNqLuvSPmLBhhXlevIMQqyZkO/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=zQHsvq5E3a2cUCBBjo53aXOoPqE%3D)

ECollisionChannel::ECC\_EngineTraceChannel1로 했다가 Collision이 안일어나서 고생했다.

( ECC\_EngineTraceChannel1 X, ECC\_GameTraceChannel1 )

EngineTraceChnnel1은 엔진에 기본으로 탑재되어있는 trace들이라고한다.

![](https://blog.kakaocdn.net/dna/d01IHx/btsJDdbdoFB/AAAAAAAAAAAAAAAAAAAAAJuL7VI9KkxLH3UJ7y2eSXruZRAMFQnTzMfLi75WruF4/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=ObBOwqCO94dWzSsU4O3PfiF6Ayk%3D)

여기서 많이 배웠다.

1. LineTraceSingleByChannel을 통해서 얻는 Hit에 사각형을 그려보니

자꾸 캐릭터 몸에 사각형이 그려졌다.

그래서 LineTraceSingleByChannel  시작 부분을 총구로 바꿔주었다. (해결되었다)

![](https://blog.kakaocdn.net/dna/bJXWuz/btsJDIPgH2Z/AAAAAAAAAAAAAAAAAAAAALsod5bhH0FEh0J1iUxrltasJloi7Ub_wWttidgLz88s/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=UFg9d62WTOVqm1b3v8LUDrqvguM%3D)

2. location, rotation이 묘하게 이상했다.

너무 하단으로 쏴지거나, 너무 상단으로 쏴지거나

GetPlayerViewPoint에서 값을 받아오고 바로 end값으로 사용하기 때문에 GetPlayerViewPoint에서 잘 못 받아오고 있는 확률 99.9%였다.

![](https://blog.kakaocdn.net/dna/dvoDJb/btsJEovMLXB/AAAAAAAAAAAAAAAAAAAAANRh7kLca_NNgTxc_S-z5MRZAu11OHgygZP-3UxLP3FM/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=FRS9RuZ5Vzf3GkLD0BgUubw2ci8%3D)

spring Arm이 너무 경사져있다. 이게 문제 같아보인다.

1번의 문제도 여기서 발생되었을 확률이 높다.

![](https://blog.kakaocdn.net/dna/uoQpa/btsJEnKnMwi/AAAAAAAAAAAAAAAAAAAAACD8ATErapvqjFfdubRAaFcDKgtsqx1Rwh544uNS0IVt/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=irsbmGD9K3UEx2s2ov2Wc29brIY%3D)

이렇게 바꿔주니 문제가 다 해결되었다.