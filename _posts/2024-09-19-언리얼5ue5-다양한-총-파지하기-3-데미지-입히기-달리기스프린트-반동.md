---
title: "[언리얼5/UE5] 다양한 총 파지하기 -3 (데미지 입히기, 달리기(스프린트), 반동)"
date: 2024-09-19
toc: true
categories:
  - "Tistory"
tags:
  - "tistory"
---

## **데미지 입히기**

데미지를 입힐 때

총은 FPointDamageEvent를 사용하면 된다.

이 외에도 다른 종류가 있다고하는데 아직 나도 초보이기 때문에 궁금하면 다른 곳을 찾아보길 바란다요... :(

1. FPointDamageEvent

FPointDamageEvent 생성자에 필요한 정보는 다행히 이미 다 구해놓았다.

FPointDamageEvent를 적고 control키를 누르고 클릭을 하면 생성자를 볼 수 있다.

영어 단어가 직관적으로 나와있으니 변수를 잘 넣어주자

2. TakeDamage

TakeDamage는 감사하게도 AActor class 에 존재한다.

우리는 이걸 override해서 재사용하면 된다.

![](https://blog.kakaocdn.net/dna/coTWj1/btsJDOhGvUF/AAAAAAAAAAAAAAAAAAAAAE058zkbIerI_IKm_aH5whwFqe_aG9URiic-WJm9siIG/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=V3xNMPaeQJmeg44sm1tpKCu88yE%3D)

SpawnEmitterAtLoaction 함수를 써서 피격부분 임펙트를 추가했다.  (이전 글을 보면 이해가 될 것이다. 간단한 effect추가니까 그냥 넘어가겠다.)

AActor::TakeDamage를 찾아들어가보자

![](https://blog.kakaocdn.net/dna/bSH8HC/btsJFbJwryU/AAAAAAAAAAAAAAAAAAAAAHII2oqv5MuUJb9MdbfmKfRTY4qK3vQ4uTi0NieTByJC/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=qRRkfZXreLPt1AMuX6nO5FuHfEs%3D)

이것과 똑같은 인자를 받게 가상함수를 만들어준다.

![](https://blog.kakaocdn.net/dna/2Cxtj/btsJFtDjUb0/AAAAAAAAAAAAAAAAAAAAAPFbnWtJMZJhBcHWQ7VL8J8AcOB-lvWLvik9HdAk6UO4/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=L7g%2FqtlCj6WSzsnc4kAtPXLXJik%3D)
![](https://blog.kakaocdn.net/dna/bHapaE/btsJEleZmpz/AAAAAAAAAAAAAAAAAAAAAOnbsVffePU7QcS0Kv2dhIa2fAfKW25ukgFDJCONG558/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=RoDq1esdv9fAzpw%2Buq0b7Ez9HFg%3D)

(Super::TakeDamge(...) -> 부모의 takeDamage가 중요한 것을 호출할 수 있으니 1번 호출해주자, ActualDamage는 AActor에서 그렇게 쓰길래 가져온 것이다.. :)

![](https://blog.kakaocdn.net/dna/cc41gc/btsJEm5XGPK/AAAAAAAAAAAAAAAAAAAAAG5eFz9Z11fb77aBKu3Dh-GS6YLQfcCD6iG9J2dtQa_-/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=dsTcCuAu98PTTTQHRF1VBuXcVqI%3D)
![](https://blog.kakaocdn.net/dna/ZAoKJ/btsJDwn2wFr/AAAAAAAAAAAAAAAAAAAAAArEVyjkhnfC2v5aZ00yfZvn9r_ARarvTltRM96KR2kt/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=6OHncz6F6UkP%2FRExB%2BCy5yh65ts%3D)

(UELOG라고 적고 tab을 누르면 자동완성이 된다),  가운데 인자를  Warning으로 바꾸면 노랑 글씨 로그가 출력되니 보기 편한다.

![](https://blog.kakaocdn.net/dna/EdC1p/btsJEivMAi4/AAAAAAAAAAAAAAAAAAAAAFUVeIwK-2oSMVghLa7uy-Ev0XKiabPFW7tAynN1L-kt/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=eOSkqMrIADK0YXM%2FygNlsLmHGv0%3D)

## **사망처리**

UFunction 을 통해서 Blueprint에 C++ 코드를 나타나게 할 수 있다.

* BlueprintCallable: 이것을 사용해도 괜찮지만
* BlueprintPure: Getter함수( 오브젝트의 어떤 것도 수정하지 않고 싶다) 일 때는 이 함수를 사용하므로서 명시해주자

![](https://blog.kakaocdn.net/dna/yilKE/btsJESwB0mq/AAAAAAAAAAAAAAAAAAAAAPT2VlPHlz3EpDdy4ogxTQxaTi2x599-BbRvDj7pt4Ey/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=NYSUNzvk6RsAWDFCnk%2FAkxjA%2BJE%3D)

![](https://blog.kakaocdn.net/dna/cY62ed/btsJEl0nk6h/AAAAAAAAAAAAAAAAAAAAABIW7E3pbyqDaTop2cDrjxw27V9YaAQbEWNBb5aYK7V8/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=Kosyxh6SWa1eF1J0TGzriaIal6Y%3D)
![](https://blog.kakaocdn.net/dna/Y2nNq/btsJDf1ndRG/AAAAAAAAAAAAAAAAAAAAAFFARni4JSJCvVKjXv5ALtcWDzsJEdxDVNNZcz5jxdcd/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=gULcTTuiJFoV6FbQCE8v1sPK1k0%3D)

이렇게 Blueprint에서 확인할 수 있다

근데 BP\_MyCharacter (본인 BP\_캐릭터 이름) 로 먼저 캐스팅을 해줘야된다.

IsDead 변수를 Setting 하는 건 내가 boolean 변수 1개를 만들어 놓은 것이다.

**C++의 IsDead함수로 Blueprint IsDead 변수 값을 세팅한것!**

![](https://blog.kakaocdn.net/dna/Yr2M1/btsJDbxSZqL/AAAAAAAAAAAAAAAAAAAAAFHzkr0tnEbYUqpqIhXwrVnLgc8deiP79yhmPiB0rghA/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=Sdd4ihOno%2BGk6I6WI7F%2F48W6%2BvA%3D)

AnimGraph에서 이렇게

BlendPosesByBool로 죽었을 때를 판별하고

애니메이션을 재생해주면 끝!~

## **달리기 (스프린트)**

갑자기 달리기라서 이상한데

사실 그 전부터 달리기 만들려고 했으나 실력이슈로 실패하다가 성공해서 추가합니다.

실패 이유

1. IE\_Pressed, IE\_Released 를 생각못하고 BindAxis로 만들려고 했음

2. MaxSpeed 조절을 BluePrint에서 하려고 하니 C++와 섞이고, 변경 함수도 못찾는 그냥 실력 이슈

아래 그림을 차례로 보면 이해가 쉬울 것이다.

1. 걷는 속도, 달리는 속도를 변수로 저장한다.

2. Sprint라는 Action에 SprintStart, SprintStop 함수를 바인딩 해준다. ( Edit -> Project Setting -> input 에서 Action에 Sprint 추가 -> 이전에 다룬 적이 있으니 스크린샷은 뺄게요 )

3. 각 함수에서 GetCharacterMovement()->MaxWalkSpeed 를 조정 (  header 파일 추가하는 것을 잊지말자 )

![](https://blog.kakaocdn.net/dna/6yh9I/btsJEoipF7E/AAAAAAAAAAAAAAAAAAAAAM7sgIf4KfbcOcQGe8qgOyJxBY1JfTfXx7Sp2tdKpfQp/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=YQvYjG4IgdEDKOkK5ASS3OvDfIA%3D)
![](https://blog.kakaocdn.net/dna/O4iBT/btsJEiCy0Gt/AAAAAAAAAAAAAAAAAAAAALF4dT8-UaNmFZ3JyywLmokcKnEcH_iDUvUxFESD1Fb8/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=lPVB64tsgBRM0xSlwJk22fE%2F%2Be4%3D)
![](https://blog.kakaocdn.net/dna/s5kx9/btsJDHCZR3F/AAAAAAAAAAAAAAAAAAAAAHS2GYhDeU7nGGtP0N7sgDzRW2R8tOZjOVx35NfebXdz/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=Bt7hY2fdkYUtFGR0%2F%2FEpMzkAEHE%3D)
![](https://blog.kakaocdn.net/dna/b8O5fj/btsJDqayS5V/AAAAAAAAAAAAAAAAAAAAABz17lHuPWGivRt4gp3KW92xpo7Dp5-Pv6aa2KawzFu9/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=yP6ncBJne8mUzBJE5TN3fl1TeKY%3D)

## 

## **반동**

이걸 왜 이제 적냐면...? 간단한거여서 중간에 넣고 포스팅하는 것을 깜박했습니다.. ㅎ..ㅎ

반동은 정말 간단합니다. 우리가 이전에

**마우스에 따라** character의 pitch와 yaw를 조정했었죠?

반동은

**공격할 때** character의 piech와 yaw를 조정하면 됩니다.

![](https://blog.kakaocdn.net/dna/bfGSyj/btsJFxlfY3f/AAAAAAAAAAAAAAAAAAAAAI5whW6CMCv9jt5oxI-ucgxBW8Zc4kUu31VdBGUVa6OU/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=CHn6qypjZ%2B9iP2kwGScPCG0PdJU%3D)

이렇게 추가하면 끝입니다!

저는 나중에 함수로 만들어서 함수 호출하는 것으로 대체했습니다!

## **헤맸던 부분**

1. 헤더 파일을 추가해야지 FPointDamageEvent  생성자레 parameter를 넣어서 만들 수 있더라요.... :(

![](https://blog.kakaocdn.net/dna/cUBqbI/btsJFJFViPo/AAAAAAAAAAAAAAAAAAAAAIRTWDkY8cHkVpq3o09QklkA0P1n9hioLJV4ykxTLKXr/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=TCr8drHgt%2FuTnzGFHsFrdFmA0R4%3D)