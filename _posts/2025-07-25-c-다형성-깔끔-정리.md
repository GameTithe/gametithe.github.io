---
title: "[C++] 다형성 깔끔 정리"
date: 2025-07-25
toc: true
categories:
  - "Tistory"
tags:
  - "tistory"
---

기본 세팅을 아래와 같이 하겠습니다

부모 클래스: Person

자식 클래스: JJB

```
class Person
{
public:
	void Who()
	{
		cout << "Person " << endl;
	}
};

class JJB : public Person
{
public:
	void Who()
	{
		cout << "JJB" << endl;
	}
};
```

테스트 해볼 것은 총 4가지 입니다.

1. 포인터 클래스가 아닐 때 + 함수가 virtual이 아닐 때

2. 포인터 클래스가 아닐 때 + 함수가 virtual일 때

3. 포인터 클래스일 때 + 함수가 virtual이 아닐 때

4. 포인터 클래스일 때 + 함수가 vritual일 때

테스트 해보기 전에 알고가야할 지식이있습니다.

**일반적으로 클래스의 어떤 함수가 호출될 지는 컴파일 타임에 정해집니다.**

하지만 **virtaul 키워드가 붙으면,** virtual table을 확인하고 함수를 호출해야 되기 때문에 **어떤 함수가 호출될 지 런타임에 정해집니다.**

이 두가지를 잘 기억하시길 바랍니다.

#### **1. 포인터 클래스가 아닐 때 + 함수가 virtual이 아닐 때**

![](https://blog.kakaocdn.net/dna/cFDZsw/btsPyHbUOgY/AAAAAAAAAAAAAAAAAAAAAKpmuwx7wda2E2k9TyBthaZRy4SagcmaP95AwLuKerTn/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=wXHBwwrXB9f6H%2BmwueeUARipw3c%3D)

virtual 키워드가 없기 때문에, 어떤 함수가 호출될 지 컴파일 타임에 정해질 것입니다.

그러니 Person이 호출되는 것이 자연습니다.

#### **2. 포인터 클래스가 아닐 때 + 함수가 virtual일 때**

![](https://blog.kakaocdn.net/dna/b7qB2G/btsPw4GvMP8/AAAAAAAAAAAAAAAAAAAAANVpL6VCcsD47Lpl4rl9dTBGQkyFSDtO-Xgon9_9RC_C/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=tcTFSt2MUy4EWlshoaWTaL9babs%3D)

virtual 키워드가 붙었습니다. 이제 어떤 함수가 호출될 지는 런타임에 정해질 것입니다.

런타임에 p를 보면 Person의 복사 생성자가 호출될 것입니다.

이 때 알아야 두어야할게 복사 생성자는 멤버 데이터를 복사하지, virtual table(virtual pointer)을 복사하지 않습니다.( **vptr은 컴파일러가 클래스 생성자 호출할 때 자동으로 설정**해주는 메타정보이지, 일반 멤버처럼 복사되지 않습니다. )

그럼 런타임에 virtual table을 확인해도 Person 클래스를 가리키는 것을 확인하는 것입니다.

#### **3. 포인터 클래스일 때 + 함수가 virtual이 아닐 때**

![](https://blog.kakaocdn.net/dna/cb0pxV/btsPyeuxBrr/AAAAAAAAAAAAAAAAAAAAAFwytjspTRdGj5kFHUXMBztBqFt3jd6a37KDH64gk0wX/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=IG1sQJqhks1qbcbZTL6zQ4MkOZk%3D)

virtual 키워드가 없기 때문에, 어떤 함수가 호출될 지 컴파일 타임에 정해질 것입니다.

컴파일러가 봤을 때, p는 Person 클래스입니다. 그러니 Person 의 함수가 호출됩니다.

#### **4. 포인터 클래스일 때 + 함수가 vritual일 때**

![](https://blog.kakaocdn.net/dna/dEOHRf/btsPyowS09t/AAAAAAAAAAAAAAAAAAAAAAcw5JGvQncSoX_m_FD-LuaRb3z7sGsDopH7eAUIRMBR/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1772290799&allow_ip=&allow_referer=&signature=WLdqHMeoeUxY7YjIso7KYZYtI9U%3D)

virtual 키워드가 붙었습니다. 이제 어떤 함수가 호출될 지는 런타임에 정해질 것입니다.

런타임에 p는 JJB 클래스를 가리키고 있습니다.

이전 값 클래스와 다르게 여기는 가리키는 주소를 바꾸는 것입니다.

JJB의 주소에 가보면 JJB의 virtual table이 존재할 것이고, JJB 함수가 호출되는 것입니다.